[gd_scene load_steps=13 format=3 uid="uid://dxafvr5ltlxe4"]

[ext_resource type="Script" path="res://Scripts/player.gd" id="1_gfmja"]
[ext_resource type="PhysicsMaterial" uid="uid://b60lo04fbymw4" path="res://Scenes/physics.tres" id="1_ojf0a"]
[ext_resource type="PackedScene" uid="uid://blm5vl76ke3r2" path="res://Scenes/steam.tscn" id="3_gfitd"]
[ext_resource type="PackedScene" uid="uid://n1udymhkh557" path="res://Scenes/jump_effect.tscn" id="3_s1n6q"]
[ext_resource type="ArrayMesh" uid="uid://mcyr3mswaem6" path="res://Models/blundergust.obj" id="4_o5s3b"]
[ext_resource type="PackedScene" uid="uid://btje00jyp5xy6" path="res://Scenes/gameplay_ui.tscn" id="4_qtga1"]
[ext_resource type="Texture2D" uid="uid://crbwgucru4i8t" path="res://Models/blundergust.png" id="6_7246x"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8dx43"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_bc1if"]
diffuse_mode = 3
albedo_texture = ExtResource("6_7246x")
metallic = 0.47
roughness = 0.0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8csy0"]
radius = 0.1
height = 1.5

[sub_resource type="Animation" id="Animation_ey18e"]
resource_name = "fire"
length = 0.25
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("PitchPivot/Camera3D/Blundergust:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.25),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 0,
"values": [Vector3(0, -3.14159, 0), Vector3(-0.349066, -3.14159, 0), Vector3(0.174533, -3.14159, 0), Vector3(0, -3.14159, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_tjjys"]
_data = {
"fire": SubResource("Animation_ey18e")
}

[node name="Player" type="RigidBody3D"]
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
physics_material_override = ExtResource("1_ojf0a")
linear_damp_mode = 1
script = ExtResource("1_gfmja")
physics = ExtResource("1_ojf0a")
steam_scene = ExtResource("3_gfitd")
jump_effect_scene = ExtResource("3_s1n6q")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_8dx43")

[node name="FloorCheck" type="RayCast3D" parent="CollisionShape3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.9, 0)
target_position = Vector3(0, -0.2, 0)
collide_with_areas = true

[node name="PitchPivot" type="Marker3D" parent="."]

[node name="Camera3D" type="Camera3D" parent="PitchPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
fov = 120.0

[node name="Blundergust" type="MeshInstance3D" parent="PitchPivot/Camera3D"]
transform = Transform3D(-0.1, 0, 8.74228e-09, 0, 0.1, 0, -8.74228e-09, 0, -0.1, 0.5, -0.25, -1)
mesh = ExtResource("4_o5s3b")
skeleton = NodePath("../../..")
surface_material_override/0 = SubResource("StandardMaterial3D_bc1if")

[node name="FirePoint" type="Marker3D" parent="PitchPivot/Camera3D/Blundergust"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 0, 2)

[node name="FireVector" type="Marker3D" parent="PitchPivot/Camera3D/Blundergust/FirePoint"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1)

[node name="LeftWallCheck" type="ShapeCast3D" parent="PitchPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 1, 0)
shape = SubResource("CapsuleShape3D_8csy0")

[node name="RightWallCheck" type="ShapeCast3D" parent="PitchPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 1, 0)
shape = SubResource("CapsuleShape3D_8csy0")

[node name="GameplayUI" parent="." instance=ExtResource("4_qtga1")]

[node name="BlundergustCooldown" type="Timer" parent="."]
wait_time = 10.0
one_shot = true

[node name="BlundergustAnimations" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_tjjys")
}
